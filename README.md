# BrowserFS_viewer
Bookmarklet to view active BrowserFS tree.

Drag the link to your Bookmarks bar: [BrowserFS Viewer](javascript:(function()%7B(function()%20%7B%0A%20%20%20%20%0A%20%20%20%20let%20remoteWindow%20%3D%20window.open(%22about%3Ablank%22)%3B%0A%20%20%20%20let%20remoteDocument%20%3D%20remoteWindow.document%3B%0A%20%20%20%20%0A%20%20%20%20function%20showDir(parent%2C%20dirname%2C%20rootElem)%20%7B%0A%20%20%20%20%20%20%20%20let%20thisPath%20%3D%20FS.joinPath(%5Bparent%2C%20dirname%5D)%3B%0A%20%20%20%20%20%20%20%20let%20entries%20%3D%20FS.readdir(thisPath).filter(entry%20%3D%3E%20entry%20!%3D%3D%20%22.%22%20%26%26%20entry%20!%3D%3D%20%22..%22)%3B%0A%20%20%20%20%20%20%20%20console.log(entries)%3B%0A%20%20%20%20%20%20%20%20for(let%20entry%20of%20entries)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20li%20%3D%20remoteDocument.createElement(%22li%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20fullEntryPath%20%3D%20FS.joinPath(%5BthisPath%2C%20entry%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(FS.isDir(FS.stat(fullEntryPath).mode))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20li.textContent%20%3D%20entry%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20ul%20%3D%20remoteDocument.createElement(%22ul%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20li.appendChild(ul)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20showDir(thisPath%2C%20entry%2C%20ul)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20blob%20%3D%20new%20Blob(%5BFS.readFile(fullEntryPath)%5D%2C%20%7Btype%3A%20%22application%2Foctet-stream%22%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20url%20%3D%20remoteWindow.URL.createObjectURL(blob)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20a%20%3D%20remoteDocument.createElement(%22a%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a.textContent%20%3D%20entry%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a.href%20%3D%20url%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a.download%20%3D%20entry%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20li.appendChild(a)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20li.textContent%20%3D%20entry%3B%20%2F%2F%20Unable%20to%20read%20%22file%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.error(%22Unable%20to%20descend%22%2C%20fullEntryPath%2C%20%22%3A%20%22%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20li.textContent%20%3D%20entry%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20rootElem.appendChild(li)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20let%20rootUl%20%3D%20remoteDocument.createElement(%22ul%22)%3B%0A%20%20%20%20remoteDocument.body.appendChild(rootUl)%3B%0A%20%20%20%20showDir(%22%22%2C%20%22%2F%22%2C%20rootUl)%3B%0A%0A%20%20%20%20%0A%20%20%20%20%0A%7D)()%3B%7D)()%3B)
